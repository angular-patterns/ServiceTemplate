<div class="card w-75">
  <div class="card-header">
    Add New Model
  </div>
  <div class="card-body">
    <h5 class="card-title">Adding a New Model</h5>
    <table class="table" *ngIf="formGroup.get('source').hasError('compile')">
      <thead>
        <tr>
          <th>Code</th>
          <th>Message</th>
          <th>Location</th>
          <th>Severity</th>
        </tr>
      </thead>
      <tbody>
          <tr *ngFor="let error of errors">
              <td>{{error.code }}</td>
              <td>{{error.message }}</td>
              <td>@{{error.location.start }}:{{error.location.end }} {{error.location.fragment}}</td>
              <td>{{error.severity }}</td>
            </tr>
    
      </tbody>
    </table>
    <form [formGroup]="formGroup">
      <div class="form-group">
        <label>Account ID</label>
        <input type="number" class="form-control" formControlName="accountId" />
      </div>
      <div class="form-group">
        <label>Typename</label>
        <input type="text" class="form-control" formControlName="typename" />
      </div>
      <div class="form-group">
        <label>CSharp Source</label>
        <textarea rows="10" class="form-control" formControlName="source">
        </textarea>
        <span class="badge badge-danger" *ngIf="formGroup.get('source').hasError('compile')">Failed</span>
        <span class="badge badge-info" *ngIf="formGroup.get('source').pending">Compiling...</span>
        <span class="badge badge-success" *ngIf="formGroup.get('source').valid">Success!</span>
      </div>

      <button  [disabled]="formGroup.get('source').pending || formGroup.invalid" (click)="onAddModel(formGroup.value)" class="btn btn-primary">Add</button>
    </form>
  </div>
</div>
<!-- <pre>
  {{ formGroup.get('source').errors | json}}
</pre> -->